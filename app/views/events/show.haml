= content_for :title, "#{@event.partner_one} & #{@event.partner_two} Wedding - #{@event.formatted_time}"

.box.box--mint
  .row
    .column.small-12
      %h1
        = @event.partner_one
        %span.font--pacifico &
        = @event.partner_two
.row
  .column.small-12
    %h5 Get married on
    %h3= @event.formatted_time

#location.inverted.paralax{ :style => "background-image: url('#{@primary_venue_photo}');" }
  .row
    .column.small-12
      %br
      %br
      %br

      %h2= "at the beautiful #{@event.venue_name}"
      %h4= "in #{@event.venue_address_city}"

      %br
      %br
      %br

      - if @event.show_rsvp?
        = link_to raw("<span class='icon icon-pencil'></span> RSVP now"), "#rsvp", class: "button large js-scroll-to"

- if @event.show_rsvp?
  %br

  #rsvp.row{ng: { controller: "RsvpController" }}
    .column.small-12
      %h5 RSVP
      = simple_form_for rsvp_event_groups_path(@event) do |f|
        %h3 Step one - enter your name
        .row
          .column.small-12.column.medium-6.medium-offset-3
            = f.input :guest, collection: @groups, as: :select, placeholder: "Select your name(s)"
        %br

      .row
        .column.small-12.medium-6{ "ng-repeat" => "guest in group" }
          .card
            %h3 {{ guestName(guest) }}
            %input{type: "text", placeholder: "enter guest name", ng: { show: "guest.is_guest", model: "newGuest.name" }}
            %p {{ rsvpStatus(guest) }}
            %span.button{ng: { show: "guest.rsvp == null && !guest.is_guest", click: "setRsvp(guest, false)"}} Sorry I can not attend
            %span.button{ng: { hide: "guest.is_guest || guest.rsvp", click: "setRsvp(guest, true)"}} {{ rsvpButtonText(guest) }}
            %span.button{ng: { show: "guest.rsvp", click: "setRsvp(guest, false)"}} Sorry I can no longer make it
            %span.button{ng: { show: "guest.is_guest", disabled: "newGuest.name == ''", click: "defineGuest(guest)"}} {{ rsvpButtonText(guest) }}
            %p {{ vegeStatus(guest) }}
            %span.button{ng: { click: "toggleVegetarian(guest, !guest.vegetarian)"}} {{ vegetarianButtonText(guest) }} 
            %p 
            %em.ng-binding If you have further dietary restrictions beyond those listed, please email us at pattyandjosh2016@gmail.com

.box.box--mint
  .row
    .column.small-12
      %h5 Venue

  .row-fluid.overflow
    %ul.small-block-grid-3
      - @venue_photos.first(3).each do |venue_photo|
        %li= image_tag venue_photo.file_url

  .row
    .column.small-12
      #venue-copy
        %h3= @event.venue_name
        = raw(@event.venue_body.from_markdown_to_html)
        %br
        %h4 Directions
        = raw(@event.venue_directions.from_markdown_to_html)
        %br
        .map--overlay{onclick: "style.pointerEvents='none'"}
        :plain
          <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
          <div class="map wpgmappity_container" id="wpgmappitymap"></div>
          <script type="text/javascript">
          (function(){
          function wpgmappity_maps_loaded() {
          var latlng = new google.maps.LatLng(40.007301, -105.275308);
          var options = {
           center : latlng,
           mapTypeId: google.maps.MapTypeId.ROADMAP,
           zoomControl : true,
           zoomControlOptions :
           {
           style: google.maps.ZoomControlStyle.SMALL,
           position: google.maps.ControlPosition.TOP_LEFT
           },
           mapTypeControl : false,
           scaleControl : false,
           streetViewControl : false,
           panControl : false, zoom : 14
          };
          var wpgmappitymap = new google.maps.Map(document.getElementById('wpgmappitymap'), options);
          var point0 = new google.maps.LatLng(40.003738, -105.300848);
          var marker0= new google.maps.Marker({
           icon : 'http://patty-josh-2016-wedding.s3.amazonaws.com/assets/rings_icon.png',
           position : point0,
           map : wpgmappitymap
           });
          google.maps.event.addListener(marker0,'click',
           function() {
           var infowindow = new google.maps.InfoWindow(
           {content: '<h3 class="font-book-antiqua">Sunrise Amphitheater</h3>'});
           infowindow.open(wpgmappitymap,marker0);
           });
          var point1 = new google.maps.LatLng(40.006417, -105.271368);
          var marker1= new google.maps.Marker({
           icon : 'http://patty-josh-2016-wedding.s3.amazonaws.com/assets/champagne.png',
           position : point1,
           map : wpgmappitymap
           });
          google.maps.event.addListener(marker1,'click',
           function() {
           var infowindow = new google.maps.InfoWindow(
           {content: '<h3 class="font-book-antiqua">University Memorial Center</h3>'});
           infowindow.open(wpgmappitymap,marker1);
           });
          var point2 = new google.maps.LatLng(40.012849, -105.260323);
          var marker2= new google.maps.Marker({
           icon : 'http://patty-josh-2016-wedding.s3.amazonaws.com/assets/hotel39.png',
           position : point2,
           map : wpgmappitymap
           });
          google.maps.event.addListener(marker2,'click',
           function() {
           var infowindow = new google.maps.InfoWindow(
           {content: '<h3 class="font-book-antiqua">Millenium Harvest House</h3><a target=\"_blank\" href=\"https://www.millenniumhotels.com/en/boulder/millennium-harvest-house-boulder/\">Go to website</a>'});
           infowindow.open(wpgmappitymap,marker2);
           });
          }
          window.onload = function() {
           wpgmappity_maps_loaded();
          };
          })()
          </script>

  %br

-#  #ballons
-#    #balloon01{data: {top: {bottom: "top: -150px"}, bottom: {center: "top: 200px"}}}
-#    #balloon02{data: {top: {bottom: "top: -200px"}, bottom: {center: "top: 350px"}}}
-#    #balloon03{data: {top: {bottom: "top: -50px"}, bottom: {center: "top: 230px"}}}
-#  #bridge
-#    #couple

- @event.sections.each do |section|
  %section
    .row
      .column.small-12.medium-8.medium-offset-2
        %h5= section.title
        = raw(section.content.from_markdown_to_html)


%br

.row
  .column.small-12.medium-8.medium-offset-2
    %h5 Photos

- if @event.show_photos?(params)
  = render partial: "photos/form"
  = render partial: "photos/index"
  #modalDropImages.reveal-modal{"data-reveal" => "", :style => "display: block;"}
    %h2.text--salmon Drop images to upload
- else
  .row
    .column.small-12
      %p We invite you back to this website after the wedding to view and upload photos

%br

.row
  .column.small-12.medium-8.medium-offset-2
    #hotel-copy
      %h5 Hotel Info 
      %p 
        We have arranged for a "Ghost" block at the Millenium Harvest House; 
        Discounted rates will be honored there until April 20, 2016. 
        Reservation ID is <strong>1605KRUSTA</strong>. 
        Please call Millenium directly at 303-998-2480 to arrange.
      %p 
        If you'd rather book elsewhere, that's great as well!
        There are plenty of great Airbnb's available throughout Boulder.
.row
  .column.small-12.medium-8.medium-offset-2
    #reception-copy
      %h5 Reception Info 
      %p 
        The reception will be held at the University Memorial Center, on the south terrace. 
        See above for parking information. 
        Reception begins at 2pm, with dinner being served at 4pm.
.row
  .column.small-12.medium-8.medium-offset-2
    #contact-info
      %h5 Contact Info 
      %p 
        If you have any further questions, feel free to contact us at pattyandjosh2016@gmail.com

%br

%footer
  %p
    %small
      For our techie friends hitched.it is an
      %a{:href => "http://github.com/adambutler/wedding-on-rails"} open source project
      built on Ruby-on-Rails.

